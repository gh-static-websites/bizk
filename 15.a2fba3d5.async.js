"use strict";(self.webpackChunkbizk=self.webpackChunkbizk||[]).push([[15],{29015:function(bt,xe,h){h.d(xe,{NH:function(){return Le},g2:function(){return ct},u1:function(){return yt}});var Ee=h(52510),ue=h.n(Ee),Te=h(57213),c=h.n(Te),We=h(93525),re=h.n(We),Ne=h(25359),te=h.n(Ne),je=h(49811),fe=h.n(je),Ae=h(54306),D=h.n(Ae),Pe=h(12342),ae=h.n(Pe),i=h(50959);function $e(e,t){var r=(0,i.useState)(!1),n=D()(r,2),u=n[0],a=n[1],s=(0,i.useState)(),d=D()(s,2),w=d[0],M=d[1],x=(0,i.useMemo)(function(){return t||{manual:!1}},[t]),b=x.manual,p=x.onError,S=x.onSuccess,C=(0,i.useCallback)(fe()(te()().mark(function g(){var f,E,j,U,O=arguments;return te()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:for(a(!0),f=O.length,E=new Array(f),j=0;j<f;j++)E[j]=O[j];return o.prev=2,o.next=5,e.apply(void 0,E);case 5:return U=o.sent,M(U),S==null||S(U,E),a(!1),o.abrupt("return",U);case 12:throw o.prev=12,o.t0=o.catch(2),p==null||p(o.t0,E),a(!1),o.t0;case 17:case"end":return o.stop()}},g,null,[[2,12]])})),[e,t]);return(0,i.useEffect)(function(){b||C.apply(void 0,re()([]))},[b]),{loading:u,data:w,run:C}}var $=h(11527),Me=["request","adapterParams","batchParams","disabledRow","authKey","rowKey","pagination"],Ie=["currentPage","pageSize"],Ke={excludes:"excludes",includes:"includes"};function Le(e){var t=e.request,r=e.adapterParams,n=e.batchParams,u=n===void 0?Ke:n,a=u.excludes,s=u.includes,d=e.disabledRow,w=e.authKey,M=w===void 0?"":w,x=e.rowKey,b=e.pagination,p=b===void 0?{}:b,S=ae()(e,Me),C=(0,i.useState)(),g=D()(C,2),f=g[0],E=g[1],j=(0,i.useState)([]),U=D()(j,2),O=U[0],I=U[1],o=(0,i.useState)([]),A=D()(o,2),K=A[0],H=A[1],ee=(0,i.useState)([]),V=D()(ee,2),z=V[0],W=V[1],T=(0,i.useState)(),L=D()(T,2),Z=L[0],me=L[1],oe=$e(function(){var m=fe()(te()().mark(function R(v){var k,B,N,G,X,Se;return te()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,t(v,M);case 2:if(k=_.sent,B=k.success,N=k.data,G=N.wholeOperationNum,X=N.items,Se=N.totalNum,!B){_.next=10;break}return _.abrupt("return",{selectableTotal:G!=null?G:Se,total:Se,data:X,success:!0});case 10:return _.abrupt("return",{selectableTotal:0,total:0,data:[],success:!1});case 11:case"end":return _.stop()}},R)}));return function(R){return m.apply(this,arguments)}}(),{manual:!0,onSuccess:function(R,v){var k=R.data;if(k.length){var B=k.map(function(G){return!(d!=null&&d(G))&&x?G[x]:void 0}).filter(function(G){return G&&!O.includes(G)});if(B.length){var N=[].concat(re()(O),re()(B));I(N),f==="all"&&W(N.filter(function(G){return!K.includes(G)}))}}}}),ie=oe.run,de=oe.data,ne=de===void 0?{}:de,ce=ne.selectableTotal,y=ce===void 0?0:ce,F=ne.total,P=F===void 0?0:F,l=(0,i.useMemo)(function(){return{type:f,selectableTotal:y,selectedRowKeys:z,selected:!!(f==="all"&&y||z!=null&&z.length),selectedTotal:f==="all"?(y!=null?y:P)-((K==null?void 0:K.length)||0):(z==null?void 0:z.length)||0}},[f,y,z,P,K]),q=function(R){W(R),f==="all"?H(O.filter(function(v){return!R.includes(v)})):K.length&&H([])},Y=function(){E(void 0),H([]),W([])},J=(0,i.useCallback)(function(){var m=f==="all",R=Z||{},v=R.currentPage,k=R.pageSize,B=ae()(R,Ie),N=c()(c()({selectedTotal:l.selectedTotal,type:m?"1":"0"},m?ue()({},a,K):ue()({},s,z)),{},{condition:B});return N},[f,a,s,K,z,Z]);return{selectedInfo:l,resetSelection:Y,takeQueryParams:J,options:c()({rowKey:x,request:function(){var m=fe()(te()().mark(function v(k,B){var N;return te()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return N=(r==null?void 0:r(k,B))||k,me(N),X.next=4,ie(N);case 4:return X.abrupt("return",X.sent);case 5:case"end":return X.stop()}},v)}));function R(v,k){return m.apply(this,arguments)}return R}(),search:{labelWidth:70},onSubmit:Y,pagination:p?c()({pageSizeOptions:[10,20,30,50],defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,size:"default",showTotal:function(R){return"\u5171\u6709 ".concat(R," \u6761")}},p):!1,rowSelection:{columnWidth:48,selectedRowKeys:z,onChange:q,preserveSelectedRowKeys:!0,selections:[{key:"all",text:"\u5168\u90E8",onSelect:function(){E("all"),H([]),W(O)}},{key:"current",text:"\u5F53\u524D\u9875",onSelect:function(R){E("current"),H([]),W(R)}}],getCheckboxProps:function(R){return{disabled:!!(d!=null&&d(R))}},alwaysShowAlert:f==="all"&&y||(z==null?void 0:z.length)},tableAlertRender:function(){return"\u5DF2\u9009\u62E9 ".concat(l.selectedTotal," \u9879")},tableAlertOptionRender:function(){return(0,$.jsx)("a",{onClick:Y,children:"\u53D6\u6D88\u9009\u62E9"})},scroll:{x:1200}},S)}}var Q="dataIndex",ke="resizable-table-id";function De(e){return"".concat(ke,"-").concat(e)}function ge(e){var t=e,r=t==null?void 0:t.map(function(n,u){var a;return c()(c()({},n),{},ue()({children:n!=null&&(a=n.children)!==null&&a!==void 0&&a.length?ge(n.children):void 0},Q,n[Q]||n.key||De("".concat(n.title,"-").concat(u))))});return r}function Oe(e){var t=(0,i.useMemo)(function(){return ge(e)},[e]);return t||e}var Ue=h(65854),ye=h.n(Ue),Fe=h(84403),Be=function(){var t=(0,i.useRef)(!1);return(0,i.useEffect)(function(){return t.current=!1,function(){t.current=!0}},[]),t};function ve(e){var t=Be(),r=(0,i.useState)(e),n=D()(r,2),u=n[0],a=n[1],s=(0,i.useCallback)(function(d){t.current||a(d)},[]);return[u,s]}var Ge=h(37635),He=h.n(Ge);function Qe(e,t,r){var n=re()(e);return function u(a){if(a)for(var s=0;s<(a==null?void 0:a.length);s++){if(t(a[s])){a[s]=c()(c()({},a[s]),{},{width:r});return}a[s].children&&u(a[s].children)}}(n),n}function he(e){return typeof e=="string"}function Ye(e){return He()(e)!=="object"||e===null?!0:!(Array.isArray(e)&&e.length||Object.keys(e).length)}var Je=["width","minWidth","maxWidth","onResize","onResizeStart","onResizeEnd","onMount","triggerRender","className","style","onClick","children","rowSpan","colSpan","title","scope"],Ve=function(t){var r=t.width,n=t.minWidth,u=t.maxWidth,a=t.onResize,s=t.onResizeStart,d=t.onResizeEnd,w=t.onMount,M=t.triggerRender,x=t.className,b=t.style,p=t.onClick,S=t.children,C=t.rowSpan,g=t.colSpan,f=t.title,E=t.scope,j=ae()(t,Je),U=(0,i.useRef)(null),O=ve(0),I=D()(O,2),o=I[0],A=I[1];if((0,i.useEffect)(function(){r&&(A(r),w==null||w(r))},[M]),(0,i.useEffect)(function(){r&&A(r)},[A,r]),!r||Number.isNaN(Number(r)))return(0,$.jsx)("th",c()(c()({},j),{},{"data-arh-disable":"true",style:b,className:x,onClick:p,rowSpan:C,colSpan:g,children:(0,$.jsx)("span",{title:f,children:S})}));var K=function(T){document.body.style.userSelect=T?"none":"",document.body.style.pointerEvents=T?"none":"",document.documentElement.style.cursor=T?"col-resize":""},H=function(T,L){ye()(T),A(L.size.width),K(!0),s==null||s(L.size.width)},ee=function(T,L){ye()(T),A(L.size.width)},V=function(){o<=0||(a(o),K(!1),d==null||d(o))},z=function(){if(Array.isArray(S)){var T=S[S.length-1];if(T){var L,Z;return he(T)||((L=T.props)===null||L===void 0?void 0:L.ellipsis)||he((Z=T.props)===null||Z===void 0?void 0:Z.label)}}return!1};return(0,$.jsxs)("th",{scope:E,className:"resizable-container ".concat(x),style:c()(c()({},b),{},{overflow:"unset"}),"data-arh-enable":"true",ref:U,onClick:p,rowSpan:C,colSpan:g,children:[(0,$.jsx)(Fe.Resizable,{className:"resizable-box",width:o,minConstraints:[n,0],maxConstraints:[u,0],height:0,handle:(0,$.jsx)("div",{className:"resizable-handler",onClick:function(T){T.stopPropagation()},children:(0,$.jsx)("div",{className:"resizable-line"})}),draggableOpts:{enableUserSelectHack:!1},onResizeStart:H,onResize:ee,onResizeStop:V,children:(0,$.jsx)("div",{style:{width:o,height:"100%"}})}),(0,$.jsx)("div",c()(c()({},j),{},{className:"resizable-title ".concat(z()?"ellipsis":""),children:(0,$.jsx)("span",{title:f,children:S})}))]})},Xe=(0,i.memo)(Ve),Ze=h(66292),qe=h.n(Ze);function be(e,t){var r=(0,i.useRef)({deps:t,obj:void 0,initialized:!1}),n=r.current;return(n.initialized===!1||!_e(n.deps,t))&&(n.deps=t,n.obj=e(),n.initialized=!0),n.obj}function _e(e,t){if(e===t)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function et(e,t){var r,n=(0,i.useRef)(e);n.current=e;var u=(r=t==null?void 0:t.wait)!==null&&r!==void 0?r:1e3,a=be(function(){return qe()(function(){return n.current.apply(n,arguments)},u,t)},[]);return(0,i.useEffect)(function(){a.cancel()},[]),{run:a,cancel:a.cancel,flush:a.flush}}function le(e){var t=(0,i.useRef)(e);t.current=(0,i.useMemo)(function(){return e},[e]);var r=(0,i.useRef)();return r.current||(r.current=function(){for(var n=arguments.length,u=new Array(n),a=0;a<n;a++)u[a]=arguments[a];return t.current.apply(this,u)}),r.current}function we(e,t,r){var n=e;return Array.isArray(n)&&Array.isArray(t)&&n.forEach(function(u,a){if(u!=null&&u.children){var s;we(u.children,(s=t[a])===null||s===void 0?void 0:s.children,r)}else{var d;n[a][r]=((d=t.find(function(w){return w.dataIndex===n[a].dataIndex}))===null||d===void 0?void 0:d[r])||n[a][r]}}),n}function tt(e){var t=e.columnsState,r=e.resizableColumns,n=e.columns,u=Oe(n),a=le(function(){var b=t||{},p=b.persistenceType,S=b.persistenceKey;if(!S||!p||typeof window=="undefined")return u;var C=window[p];try{var g,f=(g=JSON.parse((C==null?void 0:C.getItem(S))||"{}"))===null||g===void 0?void 0:g.resizableColumns;return we(u||[],f,"width")}catch(E){console.error(E)}}),s=(0,i.useState)(a),d=D()(s,2),w=d[0],M=d[1];(0,i.useEffect)(function(){M(a())},[u]),(0,i.useEffect)(function(){var b=t||{},p=b.persistenceType,S=b.persistenceKey;if(!(!S||!p||!(r!=null&&r.length))&&typeof window!="undefined"){var C=window[p];try{C.setItem(S,JSON.stringify(c()(c()({},JSON.parse((C==null?void 0:C.getItem(S))||"{}")),{},{resizableColumns:r.map(function(g){var f={dataIndex:g.dataIndex,key:g.key,width:g.width,children:g.children};return he(g.title)&&(f.title=g.title),f})})))}catch(g){console.error(g)}}},[r]);var x=le(function(){M(re()(u||[]))});return{localColumns:(0,i.useMemo)(function(){return w},[w]),resetLocalColumns:x}}function nt(e){var t=(0,i.useRef)(e);return t.current=e,t}var Re=function(t){return function(r,n){var u=(0,i.useRef)(!1);t(function(){return function(){u.current=!1}},[]),t(function(){if(!u.current)u.current=!0;else return r()},n)}},rt=h(38209),at=h.n(rt);function it(e,t){var r,n=(0,i.useRef)(e);n.current=e;var u=(r=t==null?void 0:t.wait)!==null&&r!==void 0?r:1e3,a=be(function(){return at()(function(){return n.current.apply(n,arguments)},u,t)},[]);return(0,i.useEffect)(function(){a.cancel()},[]),{run:a,cancel:a.cancel,flush:a.flush}}var ut=Re(i.useEffect);function lt(e,t,r){var n=(0,i.useState)({}),u=D()(n,2),a=u[0],s=u[1],d=it(function(){s({})},r),w=d.run,M=d.cancel;(0,i.useEffect)(function(){return w()},t),(0,i.useEffect)(M,[]),ut(e,[a])}var st=Re(lt),ot=!!(typeof window!="undefined"&&window.document&&window.document.createElement),pe=ot?i.useLayoutEffect:i.useEffect,Ce=120;function dt(e){var t=e.columns,r=e.defaultWidth,n=r===void 0?Ce:r,u=e.minConstraints,a=u===void 0?Ce/2:u,s=e.maxConstraints,d=s===void 0?1/0:s,w=e.cache,M=w===void 0?!0:w,x=e.columnsState,b=e.onResizeStart,p=e.onResizeEnd,S=(0,i.useRef)(new Map),C=ve(t||[]),g=D()(C,2),f=g[0],E=g[1],j=nt(f),U=tt({columnsState:x,columns:t,resizableColumns:f}),O=U.localColumns,I=U.resetLocalColumns,o=ve(),A=D()(o,2),K=A[0],H=A[1],ee=(0,i.useReducer)(function(y){return y+1},0),V=D()(ee,2),z=V[0],W=V[1],T=le(function(){S.current=new Map,I()}),L=(0,i.useCallback)(function(y){return function(F){F&&E(function(P){var l=Qe(P,function(J){return J[Q]===y&&!!J.width},F),q=new Map;function Y(J){J.forEach(function(m,R){var v=m[Q];q.set(v!=null?v:"",{width:m==null?void 0:m.width,index:R}),m!=null&&m.children&&Y(m.children)})}return Y(l),S.current=q,l})}},[]),Z=(0,i.useMemo)(function(){return L},[L]),me=function(F){return function(P){b==null||b(c()(c()({},F),{},{width:P,resizableColumns:j.current}))}},oe=function(F){return function(P){p==null||p(c()(c()({},F),{},{width:P,resizableColumns:j.current}))}},ie=le(function(y){var F=y==null?void 0:y.filter(function(l){return!Ye(l)}),P=F.map(function(l){var q,Y,J,m;return c()(c()({},l),{},ue()({children:l!=null&&(q=l.children)!==null&&q!==void 0&&q.length?ie(l.children):void 0,onHeaderCell:function(v){var k,B,N;return{title:typeof(l==null?void 0:l.title)=="string"?l==null?void 0:l.title:"",width:M&&((k=S.current)===null||k===void 0||(B=k.get((N=v[Q])!==null&&N!==void 0?N:""))===null||B===void 0?void 0:B.width)||(v==null?void 0:v.width),resizable:v.resizable,onMount:L(v==null?void 0:v[Q]),onResize:Z(v==null?void 0:v[Q]),onResizeStart:me(v),onResizeEnd:oe(v),minWidth:a,maxWidth:d,triggerRender:z}},width:M&&((Y=S.current)===null||Y===void 0||(J=Y.get((m=l[Q])!==null&&m!==void 0?m:""))===null||J===void 0?void 0:J.width)||(l==null?void 0:l.width),ellipsis:typeof l.ellipsis!="undefined"?l.ellipsis:!0},Q,l[Q]||l.key))});return P});pe(function(){if(O){var y=ie(O);E(y)}},[O]),st(function(){var y=ie(f);E(y)},[z],{wait:500}),pe(function(){var y=0;(function F(P){for(var l=0;l<P.length;l++)P[l].children?F(P[l].children):P[l].hideInTable||(y+=Number(P[l].width)||n)})(f),H(y)},[n,f]);var de=et(W),ne=de.run;(0,i.useEffect)(function(){return window.addEventListener("resize",ne),function(){window.removeEventListener("resize",ne)}},[ne]);var ce=(0,i.useMemo)(function(){return{header:{cell:Xe}}},[]);return{resizableColumns:f,components:ce,tableWidth:K,resetColumns:T}}var ct=dt,ze=h(84506),ft=h(78954);function vt(e){return(0,$.jsx)(ze.LB,{modifiers:[ft.K7],children:(0,$.jsx)("table",c()({},e))})}var ht=["children"];function mt(e){var t=e.children,r=ae()(e,ht);return(0,$.jsx)("tr",c()(c()({},r),{},{children:i.Children.map(t,function(n,u){var a=n.props.column,s=a.dataIndex,d=a.key,w=a.draggable;return i.cloneElement(n,{additionalProps:{index:u,id:s||d,draggable:w}})})}))}var St=["children","className","minWidth"],wt="drag-cell-ellipsis",se="cursor";function gt(e){var t=(0,i.useRef)(),r=e.id,n=e.index,u=e.draggable,a=u===void 0?!0:u,s=(0,ze.O1)({id:r}),d=s.attributes,w=s.listeners,M=s.setNodeRef,x=s.transform,b=s.isDragging,p=e.children,S=e.className,C=e.minWidth,g=C===void 0?80:C,f=ae()(e,St),E=Math.round((x==null?void 0:x.x)||0),j=(0,i.useMemo)(function(){var I,o=t.current;return{currThWidth:o==null?void 0:o.offsetWidth,nextThWidth:o==null||(I=o.nextElementSibling)===null||I===void 0?void 0:I.offsetWidth}},[b]),U=j.currThWidth,O=j.nextThWidth;return(0,i.useEffect)(function(){var I=t.current,o=I.parentNode.parentNode.parentNode,A=o.className;if(b?A.includes(se)||(o.className=[A,se].filter(function(W){return W}).join(" ")):A.includes(se)&&(o.className=A.split(" ").filter(function(W){return W!==se}).join(" ")),I.children.length&&b){var K=I.children[0],H=K.getBoundingClientRect(),ee=o.getBoundingClientRect(),V=H.x-ee.x;console.log(H);var z=o.style.cssText;o.style.cssText="".concat(z,"--translate-x: ").concat(V,"px")}},[b]),(0,$.jsxs)("th",c()(c()({},f),{},{className:S,ref:t,children:[p,r&&a?(0,$.jsx)("i",c()(c()(c()({ref:M},d),w),{},{style:{display:"block",position:"absolute",top:"0",right:"0",height:"100%",width:1,backgroundColor:"rgba(255, 0, 0, .35)",cursor:"col-resize",zIndex:3}})):null]}))}function yt(e){var t=e.columns,r=(0,i.useMemo)(function(){return t.map(function(n){var u="--dnd-col-".concat(n.dataIndex||n.key);return Object.assign(n,{width:n.width?"var(".concat(u,", ").concat(n.width,"px)"):"var(".concat(u,")")})})},[t]);return{components:{table:vt,header:{row:mt,cell:gt}},columns:r,tableWidth:1e3,reset:function(){}}}}}]);
