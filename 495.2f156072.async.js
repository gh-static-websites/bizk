"use strict";(self.webpackChunkbizk=self.webpackChunkbizk||[]).push([[495],{60495:function(dt,pe,v){v.d(pe,{NH:function(){return Ie},g2:function(){return ot}});var Ce=v(52510),ue=v.n(Ce),Ee=v(57213),y=v.n(Ee),Te=v(93525),ne=v.n(Te),Ae=v(25359),ee=v.n(Ae),Pe=v(49811),de=v.n(Pe),xe=v(54306),$=v.n(xe),je=v(12342),ce=v.n(je),u=v(50959);function $e(t,e){var n=(0,u.useState)(!1),r=$()(n,2),i=r[0],a=r[1],l=(0,u.useState)(),f=$()(l,2),b=f[0],N=f[1],W=(0,u.useMemo)(function(){return e||{manual:!1}},[e]),p=W.manual,R=W.onError,m=W.onSuccess,C=(0,u.useCallback)(de()(ee()().mark(function S(){var d,T,M,F,I=arguments;return ee()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:for(a(!0),d=I.length,T=new Array(d),M=0;M<d;M++)T[M]=I[M];return g.prev=2,g.next=5,t.apply(void 0,T);case 5:return F=g.sent,N(F),m==null||m(F,T),a(!1),g.abrupt("return",F);case 12:throw g.prev=12,g.t0=g.catch(2),R==null||R(g.t0,T),a(!1),g.t0;case 17:case"end":return g.stop()}},S,null,[[2,12]])})),[t,e]);return(0,u.useEffect)(function(){p||C.apply(void 0,ne()([]))},[p]),{loading:i,data:b,run:C}}var G=v(11527),We=["request","adapterParams","batchParams","disabledRow","authKey","rowKey","pagination"],Ne=["currentPage","pageSize"],Me={excludes:"excludes",includes:"includes"};function Ie(t){var e=t.request,n=t.adapterParams,r=t.batchParams,i=r===void 0?Me:r,a=i.excludes,l=i.includes,f=t.disabledRow,b=t.authKey,N=b===void 0?"":b,W=t.rowKey,p=t.pagination,R=p===void 0?{}:p,m=ce()(t,We),C=(0,u.useState)(),S=$()(C,2),d=S[0],T=S[1],M=(0,u.useState)([]),F=$()(M,2),I=F[0],q=F[1],g=(0,u.useState)([]),O=$()(g,2),K=O[0],Y=O[1],re=(0,u.useState)([]),_=$()(re,2),z=_[0],L=_[1],E=(0,u.useState)(),x=$()(E,2),V=x[0],he=x[1],se=$e(function(){var c=de()(ee()().mark(function w(o){var j,U,A,D,J,me;return ee()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,e(o,N);case 2:if(j=Z.sent,U=j.success,A=j.data,D=A.wholeOperationNum,J=A.items,me=A.totalNum,!U){Z.next=10;break}return Z.abrupt("return",{selectableTotal:D!=null?D:me,total:me,data:J,success:!0});case 10:return Z.abrupt("return",{selectableTotal:0,total:0,data:[],success:!1});case 11:case"end":return Z.stop()}},w)}));return function(w){return c.apply(this,arguments)}}(),{manual:!0,onSuccess:function(w,o){var j=w.data;if(j.length){var U=j.map(function(D){return!(f!=null&&f(D))&&W?D[W]:void 0}).filter(function(D){return D&&!I.includes(D)});if(U.length){var A=[].concat(ne()(I),ne()(U));q(A),d==="all"&&L(A.filter(function(D){return!K.includes(D)}))}}}}),ae=se.run,le=se.data,te=le===void 0?{}:le,oe=te.selectableTotal,h=oe===void 0?0:oe,k=te.total,P=k===void 0?0:k,s=(0,u.useMemo)(function(){return{type:d,selectableTotal:h,selectedRowKeys:z,selected:!!(d==="all"&&h||z!=null&&z.length),selectedTotal:d==="all"?(h!=null?h:P)-((K==null?void 0:K.length)||0):(z==null?void 0:z.length)||0}},[d,h,z,P,K]),X=function(w){L(w),d==="all"?Y(I.filter(function(o){return!w.includes(o)})):K.length&&Y([])},Q=function(){T(void 0),Y([]),L([])},B=(0,u.useCallback)(function(){var c=d==="all",w=V||{},o=w.currentPage,j=w.pageSize,U=ce()(w,Ne),A=y()(y()({selectedTotal:s.selectedTotal,type:c?"1":"0"},c?ue()({},a,K):ue()({},l,z)),{},{condition:U});return A},[d,a,l,K,z,V]);return{selectedInfo:s,resetSelection:Q,takeQueryParams:B,options:y()({rowKey:W,request:function(){var c=de()(ee()().mark(function o(j,U){var A;return ee()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return A=(n==null?void 0:n(j,U))||j,he(A),J.next=4,ae(A);case 4:return J.abrupt("return",J.sent);case 5:case"end":return J.stop()}},o)}));function w(o,j){return c.apply(this,arguments)}return w}(),search:{labelWidth:70},onSubmit:Q,pagination:R?y()({pageSizeOptions:[10,20,30,50],defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,size:"default",showTotal:function(w){return"\u5171\u6709 ".concat(w," \u6761")}},R):!1,rowSelection:{columnWidth:48,selectedRowKeys:z,onChange:X,preserveSelectedRowKeys:!0,selections:[{key:"all",text:"\u5168\u90E8",onSelect:function(){T("all"),Y([]),L(I)}},{key:"current",text:"\u5F53\u524D\u9875",onSelect:function(w){T("current"),Y([]),L(w)}}],getCheckboxProps:function(w){return{disabled:!!(f!=null&&f(w))}},alwaysShowAlert:d==="all"&&h||(z==null?void 0:z.length)},tableAlertRender:function(){return"\u5DF2\u9009\u62E9 ".concat(s.selectedTotal," \u9879")},tableAlertOptionRender:function(){return(0,G.jsx)("a",{onClick:Q,children:"\u53D6\u6D88\u9009\u62E9"})},scroll:{x:1200}},m)}}var H="dataIndex",Ke="resizable-table-id";function Le(t){return"".concat(Ke,"-").concat(t)}function Se(t){var e=t,n=e==null?void 0:e.map(function(r,i){var a;return y()(y()({},r),{},ue()({children:r!=null&&(a=r.children)!==null&&a!==void 0&&a.length?Se(r.children):void 0},H,r[H]||r.key||Le("".concat(r.title,"-").concat(i))))});return n}function ke(t){var e=(0,u.useMemo)(function(){return Se(t)},[t]);return e||t}var Ue=v(65854),ye=v.n(Ue),De=v(76369),Fe=function(){var e=(0,u.useRef)(!1);return(0,u.useEffect)(function(){return e.current=!1,function(){e.current=!0}},[]),e};function fe(t){var e=Fe(),n=(0,u.useState)(t),r=$()(n,2),i=r[0],a=r[1],l=(0,u.useCallback)(function(f){e.current||a(f)},[]);return[i,l]}var Oe=v(37635),Ge=v.n(Oe);function He(t,e,n){var r=ne()(t);return function i(a){if(a)for(var l=0;l<(a==null?void 0:a.length);l++){if(e(a[l])){a[l]=y()(y()({},a[l]),{},{width:n});return}a[l].children&&i(a[l].children)}}(r),r}function ve(t){return typeof t=="string"}function Qe(t){return Ge()(t)!=="object"||t===null?!0:!(Array.isArray(t)&&t.length||Object.keys(t).length)}var Be=["width","minWidth","maxWidth","onResize","onResizeStart","onResizeEnd","onMount","triggerRender","className","style","onClick","children","rowSpan","colSpan","title","scope"],Ye=function(e){var n=e.width,r=e.minWidth,i=e.maxWidth,a=e.onResize,l=e.onResizeStart,f=e.onResizeEnd,b=e.onMount,N=e.triggerRender,W=e.className,p=e.style,R=e.onClick,m=e.children,C=e.rowSpan,S=e.colSpan,d=e.title,T=e.scope,M=ce()(e,Be),F=(0,u.useRef)(null),I=fe(0),q=$()(I,2),g=q[0],O=q[1];if((0,u.useEffect)(function(){n&&(O(n),b==null||b(n))},[N]),(0,u.useEffect)(function(){n&&O(n)},[O,n]),!n||Number.isNaN(Number(n)))return(0,G.jsx)("th",y()(y()({},M),{},{"data-arh-disable":"true",style:p,className:W,onClick:R,rowSpan:C,colSpan:S,children:(0,G.jsx)("span",{title:d,children:m})}));var K=function(E){document.body.style.userSelect=E?"none":"",document.body.style.pointerEvents=E?"none":"",document.documentElement.style.cursor=E?"col-resize":""},Y=function(E,x){ye()(E),O(x.size.width),K(!0),l==null||l(x.size.width)},re=function(E,x){ye()(E),O(x.size.width)},_=function(){g<=0||(a(g),K(!1),f==null||f(g))},z=function(){if(Array.isArray(m)){var E=m[m.length-1];if(E){var x,V;return ve(E)||((x=E.props)===null||x===void 0?void 0:x.ellipsis)||ve((V=E.props)===null||V===void 0?void 0:V.label)}}return!1};return(0,G.jsxs)("th",{scope:T,className:"resizable-container ".concat(W),style:y()(y()({},p),{},{overflow:"unset"}),"data-arh-enable":"true",ref:F,onClick:R,rowSpan:C,colSpan:S,children:[(0,G.jsx)(De.Resizable,{className:"resizable-box",width:g,minConstraints:[r,0],maxConstraints:[i,0],height:0,handle:(0,G.jsx)("div",{className:"resizable-handler",onClick:function(E){E.stopPropagation()},children:(0,G.jsx)("div",{className:"resizable-line"})}),draggableOpts:{enableUserSelectHack:!1},onResizeStart:Y,onResize:re,onResizeStop:_,children:(0,G.jsx)("div",{style:{width:g,height:"100%"}})}),(0,G.jsx)("div",y()(y()({},M),{},{className:"resizable-title ".concat(z()?"ellipsis":""),children:(0,G.jsx)("span",{title:d,children:m})}))]})},Je=(0,u.memo)(Ye),Ve=v(66292),Xe=v.n(Ve);function ge(t,e){var n=(0,u.useRef)({deps:e,obj:void 0,initialized:!1}),r=n.current;return(r.initialized===!1||!Ze(r.deps,e))&&(r.deps=e,r.obj=t(),r.initialized=!0),r.obj}function Ze(t,e){if(t===e)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function qe(t,e){var n,r=(0,u.useRef)(t);r.current=t;var i=(n=e==null?void 0:e.wait)!==null&&n!==void 0?n:1e3,a=ge(function(){return Xe()(function(){return r.current.apply(r,arguments)},i,e)},[]);return(0,u.useEffect)(function(){a.cancel()},[]),{run:a,cancel:a.cancel,flush:a.flush}}function ie(t){var e=(0,u.useRef)(t);e.current=(0,u.useMemo)(function(){return t},[t]);var n=(0,u.useRef)();return n.current||(n.current=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e.current.apply(this,i)}),n.current}function we(t,e,n){var r=t;return Array.isArray(r)&&Array.isArray(e)&&r.forEach(function(i,a){if(i!=null&&i.children){var l;we(i.children,(l=e[a])===null||l===void 0?void 0:l.children,n)}else{var f;r[a][n]=((f=e.find(function(b){return b.dataIndex===r[a].dataIndex}))===null||f===void 0?void 0:f[n])||r[a][n]}}),r}function _e(t){var e=t.columnsState,n=t.resizableColumns,r=t.columns,i=ke(r),a=ie(function(){var p=e||{},R=p.persistenceType,m=p.persistenceKey;if(!m||!R||typeof window=="undefined")return i;var C=window[R];try{var S,d=(S=JSON.parse((C==null?void 0:C.getItem(m))||"{}"))===null||S===void 0?void 0:S.resizableColumns;return we(i||[],d,"width")}catch(T){console.error(T)}}),l=(0,u.useState)(a),f=$()(l,2),b=f[0],N=f[1];(0,u.useEffect)(function(){N(a())},[i]),(0,u.useEffect)(function(){var p=e||{},R=p.persistenceType,m=p.persistenceKey;if(!(!m||!R||!(n!=null&&n.length))&&typeof window!="undefined"){var C=window[R];try{C.setItem(m,JSON.stringify(y()(y()({},JSON.parse((C==null?void 0:C.getItem(m))||"{}")),{},{resizableColumns:n.map(function(S){var d={dataIndex:S.dataIndex,key:S.key,width:S.width,children:S.children};return ve(S.title)&&(d.title=S.title),d})})))}catch(S){console.error(S)}}},[n]);var W=ie(function(){N(ne()(i||[]))});return{localColumns:(0,u.useMemo)(function(){return b},[b]),resetLocalColumns:W}}function et(t){var e=(0,u.useRef)(t);return e.current=t,e}var Re=function(e){return function(n,r){var i=(0,u.useRef)(!1);e(function(){return function(){i.current=!1}},[]),e(function(){if(!i.current)i.current=!0;else return n()},r)}},tt=v(38209),nt=v.n(tt);function rt(t,e){var n,r=(0,u.useRef)(t);r.current=t;var i=(n=e==null?void 0:e.wait)!==null&&n!==void 0?n:1e3,a=ge(function(){return nt()(function(){return r.current.apply(r,arguments)},i,e)},[]);return(0,u.useEffect)(function(){a.cancel()},[]),{run:a,cancel:a.cancel,flush:a.flush}}var at=Re(u.useEffect);function ut(t,e,n){var r=(0,u.useState)({}),i=$()(r,2),a=i[0],l=i[1],f=rt(function(){l({})},n),b=f.run,N=f.cancel;(0,u.useEffect)(function(){return b()},e),(0,u.useEffect)(N,[]),at(t,[a])}var it=Re(ut),st=!!(typeof window!="undefined"&&window.document&&window.document.createElement),ze=st?u.useLayoutEffect:u.useEffect,be=120;function lt(t){var e=t.columns,n=t.defaultWidth,r=n===void 0?be:n,i=t.minConstraints,a=i===void 0?be/2:i,l=t.maxConstraints,f=l===void 0?1/0:l,b=t.cache,N=b===void 0?!0:b,W=t.columnsState,p=t.onResizeStart,R=t.onResizeEnd,m=(0,u.useRef)(new Map),C=fe(e||[]),S=$()(C,2),d=S[0],T=S[1],M=et(d),F=_e({columnsState:W,columns:e,resizableColumns:d}),I=F.localColumns,q=F.resetLocalColumns,g=fe(),O=$()(g,2),K=O[0],Y=O[1],re=(0,u.useReducer)(function(h){return h+1},0),_=$()(re,2),z=_[0],L=_[1],E=ie(function(){m.current=new Map,q()}),x=(0,u.useCallback)(function(h){return function(k){k&&T(function(P){var s=He(P,function(B){return B[H]===h&&!!B.width},k),X=new Map;function Q(B){B.forEach(function(c,w){var o=c[H];X.set(o!=null?o:"",{width:c==null?void 0:c.width,index:w}),c!=null&&c.children&&Q(c.children)})}return Q(s),m.current=X,s})}},[]),V=(0,u.useMemo)(function(){return x},[x]),he=function(k){return function(P){p==null||p(y()(y()({},k),{},{width:P,resizableColumns:M.current}))}},se=function(k){return function(P){R==null||R(y()(y()({},k),{},{width:P,resizableColumns:M.current}))}},ae=ie(function(h){var k=h==null?void 0:h.filter(function(s){return!Qe(s)}),P=k.map(function(s){var X,Q,B,c;return y()(y()({},s),{},ue()({children:s!=null&&(X=s.children)!==null&&X!==void 0&&X.length?ae(s.children):void 0,onHeaderCell:function(o){var j,U,A;return{title:typeof(s==null?void 0:s.title)=="string"?s==null?void 0:s.title:"",width:N&&((j=m.current)===null||j===void 0||(U=j.get((A=o[H])!==null&&A!==void 0?A:""))===null||U===void 0?void 0:U.width)||(o==null?void 0:o.width),resizable:o.resizable,onMount:x(o==null?void 0:o[H]),onResize:V(o==null?void 0:o[H]),onResizeStart:he(o),onResizeEnd:se(o),minWidth:a,maxWidth:f,triggerRender:z}},width:N&&((Q=m.current)===null||Q===void 0||(B=Q.get((c=s[H])!==null&&c!==void 0?c:""))===null||B===void 0?void 0:B.width)||(s==null?void 0:s.width),ellipsis:typeof s.ellipsis!="undefined"?s.ellipsis:!0},H,s[H]||s.key))});return P});ze(function(){if(I){var h=ae(I);T(h)}},[I]),it(function(){var h=ae(d);T(h)},[z],{wait:500}),ze(function(){var h=0;(function k(P){for(var s=0;s<P.length;s++)P[s].children?k(P[s].children):P[s].hideInTable||(h+=Number(P[s].width)||r)})(d),Y(h)},[r,d]);var le=qe(L),te=le.run;(0,u.useEffect)(function(){return window.addEventListener("resize",te),function(){window.removeEventListener("resize",te)}},[te]);var oe=(0,u.useMemo)(function(){return{header:{cell:Je}}},[]);return{resizableColumns:d,components:oe,tableWidth:K,resetColumns:E}}var ot=lt}}]);
