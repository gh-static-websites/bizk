"use strict";(self.webpackChunkbizk=self.webpackChunkbizk||[]).push([[904],{60904:function(xt,Te,m){m.d(Te,{NH:function(){return ke},g2:function(){return vt},u1:function(){return zt}});var je=m(82092),ae=m.n(je),Ae=m(26068),l=m.n(Ae),Pe=m(15558),ie=m.n(Pe),Ne=m(90228),te=m.n(Ne),Le=m(87999),he=m.n(Le),Ie=m(48305),I=m.n(Ie),We=m(67825),ne=m.n(We),u=m(50959);function $e(e,t){var n=(0,u.useState)(!1),r=I()(n,2),i=r[0],a=r[1],s=(0,u.useState)(),c=I()(s,2),S=c[0],A=c[1],C=(0,u.useMemo)(function(){return t||{manual:!1}},[t]),R=C.manual,f=C.onError,v=C.onSuccess,p=(0,u.useCallback)(he()(te()().mark(function g(){var h,z,P,K,W=arguments;return te()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:for(a(!0),h=W.length,z=new Array(h),P=0;P<h;P++)z[P]=W[P];return b.prev=2,b.next=5,e.apply(void 0,z);case 5:return K=b.sent,A(K),v==null||v(K,z),a(!1),b.abrupt("return",K);case 12:throw b.prev=12,b.t0=b.catch(2),f==null||f(b.t0,z),a(!1),b.t0;case 17:case"end":return b.stop()}},g,null,[[2,12]])})),[e,t]);return(0,u.useEffect)(function(){R||p.apply(void 0,ie()([]))},[R]),{loading:i,data:S,run:p}}var j=m(11527),Me=["request","adapterParams","batchParams","disabledRow","authKey","rowKey","pagination"],Ke=["currentPage","pageSize"],De={excludes:"excludes",includes:"includes"};function ke(e){var t=e.request,n=e.adapterParams,r=e.batchParams,i=r===void 0?De:r,a=i.excludes,s=i.includes,c=e.disabledRow,S=e.authKey,A=S===void 0?"":S,C=e.rowKey,R=e.pagination,f=R===void 0?{}:R,v=ne()(e,Me),p=(0,u.useState)(),g=I()(p,2),h=g[0],z=g[1],P=(0,u.useState)([]),K=I()(P,2),W=K[0],Y=K[1],b=(0,u.useState)([]),D=I()(b,2),N=D[0],G=D[1],ee=(0,u.useState)([]),J=I()(ee,2),x=J[0],k=J[1],T=(0,u.useState)(),$=I()(T,2),Z=$[0],Se=$[1],ce=$e(function(){var y=he()(te()().mark(function d(E){var M,V,B,F,X,ye;return te()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,t(E,A);case 2:if(M=_.sent,V=M.success,B=M.data,F=B.wholeOperationNum,X=B.items,ye=B.totalNum,!V){_.next=10;break}return _.abrupt("return",{selectableTotal:F!=null?F:ye,total:ye,data:X,success:!0});case 10:return _.abrupt("return",{selectableTotal:0,total:0,data:[],success:!1});case 11:case"end":return _.stop()}},d)}));return function(d){return y.apply(this,arguments)}}(),{manual:!0,onSuccess:function(d,E){var M=d.data;if(M.length){var V=M.map(function(F){return!(c!=null&&c(F))&&C?F[C]:void 0}).filter(function(F){return F&&!W.includes(F)});if(V.length){var B=[].concat(ie()(W),ie()(V));Y(B),h==="all"&&k(B.filter(function(F){return!N.includes(F)}))}}}}),ue=ce.run,fe=ce.data,re=fe===void 0?{}:fe,ve=re.selectableTotal,w=ve===void 0?0:ve,O=re.total,L=O===void 0?0:O,o=(0,u.useMemo)(function(){return{type:h,selectableTotal:w,selectedRowKeys:x,selected:!!(h==="all"&&w||x!=null&&x.length),selectedTotal:h==="all"?(w!=null?w:L)-((N==null?void 0:N.length)||0):(x==null?void 0:x.length)||0}},[h,w,x,L,N]),q=function(d){k(d),h==="all"?G(W.filter(function(E){return!d.includes(E)})):N.length&&G([])},U=function(){z(void 0),G([]),k([])},Q=(0,u.useCallback)(function(){var y=h==="all",d=Z||{},E=d.currentPage,M=d.pageSize,V=ne()(d,Ke),B=l()(l()({selectedTotal:o.selectedTotal,type:y?"1":"0"},y?ae()({},a,N):ae()({},s,x)),{},{condition:V});return B},[h,a,s,N,x,Z]);return{selectedInfo:o,resetSelection:U,takeQueryParams:Q,options:l()({rowKey:C,request:function(){var y=he()(te()().mark(function E(M,V){var B;return te()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return B=(n==null?void 0:n(M,V))||M,Se(B),X.next=4,ue(B);case 4:return X.abrupt("return",X.sent);case 5:case"end":return X.stop()}},E)}));function d(E,M){return y.apply(this,arguments)}return d}(),search:{labelWidth:70},onSubmit:U,pagination:f?l()({pageSizeOptions:[10,20,30,50],defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,size:"default",showTotal:function(d){return"\u5171\u6709 ".concat(d," \u6761")}},f):!1,rowSelection:{columnWidth:48,selectedRowKeys:x,onChange:q,preserveSelectedRowKeys:!0,selections:[{key:"all",text:"\u5168\u90E8",onSelect:function(){z("all"),G([]),k(W)}},{key:"current",text:"\u5F53\u524D\u9875",onSelect:function(d){z("current"),G([]),k(d)}}],getCheckboxProps:function(d){return{disabled:!!(c!=null&&c(d))}},alwaysShowAlert:h==="all"&&w||(x==null?void 0:x.length)},tableAlertRender:function(){return"\u5DF2\u9009\u62E9 ".concat(o.selectedTotal," \u9879")},tableAlertOptionRender:function(){return(0,j.jsx)("a",{onClick:U,children:"\u53D6\u6D88\u9009\u62E9"})},scroll:{x:1200}},v)}}var H="dataIndex",Oe="resizable-table-id";function Ue(e){return"".concat(Oe,"-").concat(e)}function be(e){var t=e,n=t==null?void 0:t.map(function(r,i){var a;return l()(l()({},r),{},ae()({children:r!=null&&(a=r.children)!==null&&a!==void 0&&a.length?be(r.children):void 0},H,r[H]||r.key||Ue("".concat(r.title,"-").concat(i))))});return n}function Be(e){var t=(0,u.useMemo)(function(){return be(e)},[e]);return t||e}var Fe=m(36075),we=m.n(Fe),Ge=m(71402),He=function(){var t=(0,u.useRef)(!1);return(0,u.useEffect)(function(){return t.current=!1,function(){t.current=!0}},[]),t};function me(e){var t=He(),n=(0,u.useState)(e),r=I()(n,2),i=r[0],a=r[1],s=(0,u.useCallback)(function(c){t.current||a(c)},[]);return[i,s]}var Qe=m(31759),Ye=m.n(Qe);function Je(e,t,n){var r=ie()(e);return function i(a){if(a)for(var s=0;s<(a==null?void 0:a.length);s++){if(t(a[s])){a[s]=l()(l()({},a[s]),{},{width:n});return}a[s].children&&i(a[s].children)}}(r),r}function ge(e){return typeof e=="string"}function Ve(e){return Ye()(e)!=="object"||e===null?!0:!(Array.isArray(e)&&e.length||Object.keys(e).length)}var Xe=["width","minWidth","maxWidth","onResize","onResizeStart","onResizeEnd","onMount","triggerRender","className","style","onClick","children","rowSpan","colSpan","title","scope"],Ze=function(t){var n=t.width,r=t.minWidth,i=t.maxWidth,a=t.onResize,s=t.onResizeStart,c=t.onResizeEnd,S=t.onMount,A=t.triggerRender,C=t.className,R=t.style,f=t.onClick,v=t.children,p=t.rowSpan,g=t.colSpan,h=t.title,z=t.scope,P=ne()(t,Xe),K=(0,u.useRef)(null),W=me(0),Y=I()(W,2),b=Y[0],D=Y[1];if((0,u.useEffect)(function(){n&&(D(n),S==null||S(n))},[A]),(0,u.useEffect)(function(){n&&D(n)},[D,n]),!n||Number.isNaN(Number(n)))return(0,j.jsx)("th",l()(l()({},P),{},{"data-arh-disable":"true",style:R,className:C,onClick:f,rowSpan:p,colSpan:g,children:(0,j.jsx)("span",{title:h,children:v})}));var N=function(T){document.body.style.userSelect=T?"none":"",document.body.style.pointerEvents=T?"none":"",document.documentElement.style.cursor=T?"col-resize":""},G=function(T,$){we()(T),D($.size.width),N(!0),s==null||s($.size.width)},ee=function(T,$){we()(T),D($.size.width)},J=function(){b<=0||(a(b),N(!1),c==null||c(b))},x=function(){if(Array.isArray(v)){var T=v[v.length-1];if(T){var $,Z;return ge(T)||(($=T.props)===null||$===void 0?void 0:$.ellipsis)||ge((Z=T.props)===null||Z===void 0?void 0:Z.label)}}return!1};return(0,j.jsxs)("th",{scope:z,className:"resizable-container ".concat(C),style:l()(l()({},R),{},{overflow:"unset"}),"data-arh-enable":"true",ref:K,onClick:f,rowSpan:p,colSpan:g,children:[(0,j.jsx)(Ge.Resizable,{className:"resizable-box",width:b,minConstraints:[r,0],maxConstraints:[i,0],height:0,handle:(0,j.jsx)("div",{className:"resizable-handler",onClick:function(T){T.stopPropagation()},children:(0,j.jsx)("div",{className:"resizable-line"})}),draggableOpts:{enableUserSelectHack:!1},onResizeStart:G,onResize:ee,onResizeStop:J,children:(0,j.jsx)("div",{style:{width:b,height:"100%"}})}),(0,j.jsx)("div",l()(l()({},P),{},{className:"resizable-title ".concat(x()?"ellipsis":""),children:(0,j.jsx)("span",{title:h,children:v})}))]})},qe=(0,u.memo)(Ze),_e=m(66292),et=m.n(_e);function Re(e,t){var n=(0,u.useRef)({deps:t,obj:void 0,initialized:!1}),r=n.current;return(r.initialized===!1||!tt(r.deps,t))&&(r.deps=t,r.obj=e(),r.initialized=!0),r.obj}function tt(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function nt(e,t){var n,r=(0,u.useRef)(e);r.current=e;var i=(n=t==null?void 0:t.wait)!==null&&n!==void 0?n:1e3,a=Re(function(){return et()(function(){return r.current.apply(r,arguments)},i,t)},[]);return(0,u.useEffect)(function(){a.cancel()},[]),{run:a,cancel:a.cancel,flush:a.flush}}function se(e){var t=(0,u.useRef)(e);t.current=(0,u.useMemo)(function(){return e},[e]);var n=(0,u.useRef)();return n.current||(n.current=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.current.apply(this,i)}),n.current}function pe(e,t,n){var r=e;return Array.isArray(r)&&Array.isArray(t)&&r.forEach(function(i,a){if(i!=null&&i.children){var s;pe(i.children,(s=t[a])===null||s===void 0?void 0:s.children,n)}else{var c;r[a][n]=((c=t.find(function(S){return S.dataIndex===r[a].dataIndex}))===null||c===void 0?void 0:c[n])||r[a][n]}}),r}function rt(e){var t=e.columnsState,n=e.resizableColumns,r=e.columns,i=Be(r),a=se(function(){var R=t||{},f=R.persistenceType,v=R.persistenceKey;if(!v||!f||typeof window=="undefined")return i;var p=window[f];try{var g,h=(g=JSON.parse((p==null?void 0:p.getItem(v))||"{}"))===null||g===void 0?void 0:g.resizableColumns;return pe(i||[],h,"width")}catch(z){console.error(z)}}),s=(0,u.useState)(a),c=I()(s,2),S=c[0],A=c[1];(0,u.useEffect)(function(){A(a())},[i]),(0,u.useEffect)(function(){var R=t||{},f=R.persistenceType,v=R.persistenceKey;if(!(!v||!f||!(n!=null&&n.length))&&typeof window!="undefined"){var p=window[f];try{p.setItem(v,JSON.stringify(l()(l()({},JSON.parse((p==null?void 0:p.getItem(v))||"{}")),{},{resizableColumns:n.map(function(g){var h={dataIndex:g.dataIndex,key:g.key,width:g.width,children:g.children};return ge(g.title)&&(h.title=g.title),h})})))}catch(g){console.error(g)}}},[n]);var C=se(function(){A(ie()(i||[]))});return{localColumns:(0,u.useMemo)(function(){return S},[S]),resetLocalColumns:C}}function at(e){var t=(0,u.useRef)(e);return t.current=e,t}var Ce=function(t){return function(n,r){var i=(0,u.useRef)(!1);t(function(){return function(){i.current=!1}},[]),t(function(){if(!i.current)i.current=!0;else return n()},r)}},it=m(38209),ut=m.n(it);function st(e,t){var n,r=(0,u.useRef)(e);r.current=e;var i=(n=t==null?void 0:t.wait)!==null&&n!==void 0?n:1e3,a=Re(function(){return ut()(function(){return r.current.apply(r,arguments)},i,t)},[]);return(0,u.useEffect)(function(){a.cancel()},[]),{run:a,cancel:a.cancel,flush:a.flush}}var lt=Ce(u.useEffect);function ot(e,t,n){var r=(0,u.useState)({}),i=I()(r,2),a=i[0],s=i[1],c=st(function(){s({})},n),S=c.run,A=c.cancel;(0,u.useEffect)(function(){return S()},t),(0,u.useEffect)(A,[]),lt(e,[a])}var dt=Ce(ot),ct=!!(typeof window!="undefined"&&window.document&&window.document.createElement),ze=ct?u.useLayoutEffect:u.useEffect,xe=120;function ft(e){var t=e.columns,n=e.defaultWidth,r=n===void 0?xe:n,i=e.minConstraints,a=i===void 0?xe/2:i,s=e.maxConstraints,c=s===void 0?1/0:s,S=e.cache,A=S===void 0?!0:S,C=e.columnsState,R=e.onResizeStart,f=e.onResizeEnd,v=(0,u.useRef)(new Map),p=me(t||[]),g=I()(p,2),h=g[0],z=g[1],P=at(h),K=rt({columnsState:C,columns:t,resizableColumns:h}),W=K.localColumns,Y=K.resetLocalColumns,b=me(),D=I()(b,2),N=D[0],G=D[1],ee=(0,u.useReducer)(function(w){return w+1},0),J=I()(ee,2),x=J[0],k=J[1],T=se(function(){v.current=new Map,Y()}),$=(0,u.useCallback)(function(w){return function(O){O&&z(function(L){var o=Je(L,function(Q){return Q[H]===w&&!!Q.width},O),q=new Map;function U(Q){Q.forEach(function(y,d){var E=y[H];q.set(E!=null?E:"",{width:y==null?void 0:y.width,index:d}),y!=null&&y.children&&U(y.children)})}return U(o),v.current=q,o})}},[]),Z=(0,u.useMemo)(function(){return $},[$]),Se=function(O){return function(L){R==null||R(l()(l()({},O),{},{width:L,resizableColumns:P.current}))}},ce=function(O){return function(L){f==null||f(l()(l()({},O),{},{width:L,resizableColumns:P.current}))}},ue=se(function(w){var O=w==null?void 0:w.filter(function(o){return!Ve(o)}),L=O.map(function(o){var q,U,Q;return l()(l()({},o),{},ae()({children:o!=null&&(q=o.children)!==null&&q!==void 0&&q.length?ue(o.children):void 0,onHeaderCell:function(d){var E,M;return{title:typeof(o==null?void 0:o.title)=="string"?o==null?void 0:o.title:"",width:A&&((E=v.current)===null||E===void 0||(E=E.get((M=d[H])!==null&&M!==void 0?M:""))===null||E===void 0?void 0:E.width)||(d==null?void 0:d.width),resizable:d.resizable,onMount:$(d==null?void 0:d[H]),onResize:Z(d==null?void 0:d[H]),onResizeStart:Se(d),onResizeEnd:ce(d),minWidth:a,maxWidth:c,triggerRender:x}},width:A&&((U=v.current)===null||U===void 0||(U=U.get((Q=o[H])!==null&&Q!==void 0?Q:""))===null||U===void 0?void 0:U.width)||(o==null?void 0:o.width),ellipsis:typeof o.ellipsis!="undefined"?o.ellipsis:!0},H,o[H]||o.key))});return L});ze(function(){if(W){var w=ue(W);z(w)}},[W]),dt(function(){var w=ue(h);z(w)},[x],{wait:500}),ze(function(){var w=0;(function O(L){for(var o=0;o<L.length;o++)L[o].children?O(L[o].children):L[o].hideInTable||(w+=Number(L[o].width)||r)})(h),G(w)},[r,h]);var fe=nt(k),re=fe.run;(0,u.useEffect)(function(){return window.addEventListener("resize",re),function(){window.removeEventListener("resize",re)}},[re]);var ve=(0,u.useMemo)(function(){return{header:{cell:qe}}},[]);return{resizableColumns:h,components:ve,tableWidth:N,resetColumns:T}}var vt=ft,Ee=m(46370),ht=m(20643);function mt(e){return(0,j.jsx)(Ee.LB,{modifiers:[ht.K7],children:(0,j.jsx)("table",l()({},e))})}var gt=["children"];function St(e){var t=e.children,n=ne()(e,gt);return(0,j.jsx)("tr",l()(l()({},n),{},{children:u.Children.map(t,function(r,i){var a=r.props.column,s=a.dataIndex,c=a.key,S=a.draggable;return u.cloneElement(r,{additionalProps:{index:i,id:s||c,draggable:S}})})}))}function yt(e,t){for(var n=[];(e=(r=e)===null||r===void 0?void 0:r.parentNode)&&e!==document;){var r,i;(!t||(i=e)!==null&&i!==void 0&&i.matches(t))&&n.push(e)}return n}function le(e){return e.split(";").reduce(function(t,n){if(n){var r=n==null?void 0:n.split(":"),i=I()(r,2),a=i[0],s=i[1];t[a.trim()]=s.trim()}return t},{})}function oe(e){return Object.entries(e).map(function(t){return t.join(":")}).join(";")}function bt(e,t){var n=t.min,r=t.max,i=t.offset,a=e+i;return a<n?{width:n,offset:n-e}:a>r?{width:r,offset:r-e}:{width:a,offset:i}}var de="cursor";function wt(e){var t=e.isDragging,n=e.offset,r=e.targetElem,i=e.minLimit,a=i===void 0?80:i,s=e.maxLimit,c=s===void 0?1/0:s,S=e.cache,A=S===void 0?!1:S,C=(0,u.useRef)(0);(0,u.useLayoutEffect)(function(){if(r){var R=r.querySelector(':scope i[data-cypress="draggable-handle"]');if(R){var f=yt(r,"table")[0],v=f.classList;if(t?v.contains(de)||v.add(de):v.contains(de)&&v.remove(de),t){var p=R.getBoundingClientRect(),g=f.getBoundingClientRect(),h=Math.round(p.x-g.x+n-2);f.style.cssText=oe(l()(l()({},le(f.style.cssText)),{},{"--dnd-translate-x":"".concat(h,"px")})),C.current=n}else{var z=le(f.style.cssText);if(delete z["--dnd-translate-x"],f.style.cssText=oe(z),C.current!==0){var P=f.querySelector(":scope colgroup"),K=r.getBoundingClientRect(),W=f.getBoundingClientRect(),Y="--dnd-col-".concat(r.getAttribute("id")),b=le(P.style.cssText),D=le(f.style.cssText),N=bt(K.width,{min:a,max:c,offset:C.current}),G=N.width,ee=N.offset,J=W.width+ee;P.style.cssText=oe(l()(l()({},b),{},ae()({},Y,"".concat(G,"px")))),f.style.cssText=oe(l()(l()({},D),{},{width:"".concat(J,"px")}))}}}}},[t,n,r])}var Rt=["children","className"];function pt(e){var t=(0,u.useRef)(),n=e.id,r=e.index,i=e.draggable,a=i===void 0?!0:i,s=(0,Ee.O1)({id:n}),c=s.attributes,S=s.listeners,A=s.setNodeRef,C=s.transform,R=s.isDragging,f=e.children,v=e.className,p=ne()(e,Rt),g=Math.round((C==null?void 0:C.x)||0);return wt(l()({isDragging:R,offset:g,targetElem:t.current},p)),(0,j.jsxs)("th",l()(l()({},p),{},{className:v,ref:t,children:[f,n&&a?(0,j.jsx)("i",l()(l()(l()({ref:A},c),S),{},{style:{display:"block",position:"absolute",top:"0",right:"0",height:"100%",width:1,backgroundColor:"rgba(255, 0, 0, .35)",cursor:"col-resize",zIndex:3},"data-cypress":"draggable-handle"})):null]}))}var Ct=["columns"];function zt(e){var t=e.columns,n=ne()(e,Ct),r=(0,u.useMemo)(function(){return t.map(function(i){var a="--dnd-col-".concat(i.dataIndex||i.key);return Object.assign(i,{width:i.width?"var(".concat(a,", ").concat(i.width,"px)"):"var(".concat(a,")")})})},[t]);return{components:{table:mt,header:{row:St,cell:function(a){return(0,j.jsx)(pt,l()(l()({},a),n))}}},columns:r,tableWidth:"100%",reset:function(){}}}}}]);
