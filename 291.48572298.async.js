"use strict";(self.webpackChunkbizk=self.webpackChunkbizk||[]).push([[291],{8291:function(xt,Te,m){m.d(Te,{NH:function(){return ke},g2:function(){return vt},u1:function(){return zt}});var je=m(52510),ae=m.n(je),Ae=m(57213),l=m.n(Ae),Pe=m(93525),ie=m.n(Pe),Ne=m(25359),te=m.n(Ne),$e=m(49811),he=m.n($e),Le=m(54306),I=m.n(Le),Ie=m(12342),ne=m.n(Ie),u=m(50959);function We(e,t){var n=(0,u.useState)(!1),r=I()(n,2),i=r[0],a=r[1],s=(0,u.useState)(),d=I()(s,2),y=d[0],P=d[1],C=(0,u.useMemo)(function(){return t||{manual:!1}},[t]),R=C.manual,c=C.onError,f=C.onSuccess,p=(0,u.useCallback)(he()(te()().mark(function S(){var v,x,N,D,W=arguments;return te()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:for(a(!0),v=W.length,x=new Array(v),N=0;N<v;N++)x[N]=W[N];return w.prev=2,w.next=5,e.apply(void 0,x);case 5:return D=w.sent,P(D),f==null||f(D,x),a(!1),w.abrupt("return",D);case 12:throw w.prev=12,w.t0=w.catch(2),c==null||c(w.t0,x),a(!1),w.t0;case 17:case"end":return w.stop()}},S,null,[[2,12]])})),[e,t]);return(0,u.useEffect)(function(){R||p.apply(void 0,ie()([]))},[R]),{loading:i,data:y,run:p}}var A=m(11527),Me=["request","adapterParams","batchParams","disabledRow","authKey","rowKey","pagination"],Ke=["currentPage","pageSize"],De={excludes:"excludes",includes:"includes"};function ke(e){var t=e.request,n=e.adapterParams,r=e.batchParams,i=r===void 0?De:r,a=i.excludes,s=i.includes,d=e.disabledRow,y=e.authKey,P=y===void 0?"":y,C=e.rowKey,R=e.pagination,c=R===void 0?{}:R,f=ne()(e,Me),p=(0,u.useState)(),S=I()(p,2),v=S[0],x=S[1],N=(0,u.useState)([]),D=I()(N,2),W=D[0],J=D[1],w=(0,u.useState)([]),k=I()(w,2),$=k[0],G=k[1],ee=(0,u.useState)([]),V=I()(ee,2),E=V[0],O=V[1],T=(0,u.useState)(),M=I()(T,2),Z=M[0],Se=M[1],ce=We(function(){var g=he()(te()().mark(function z(h){var K,B,j,F,X,ye;return te()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,t(h,P);case 2:if(K=_.sent,B=K.success,j=K.data,F=j.wholeOperationNum,X=j.items,ye=j.totalNum,!B){_.next=10;break}return _.abrupt("return",{selectableTotal:F!=null?F:ye,total:ye,data:X,success:!0});case 10:return _.abrupt("return",{selectableTotal:0,total:0,data:[],success:!1});case 11:case"end":return _.stop()}},z)}));return function(z){return g.apply(this,arguments)}}(),{manual:!0,onSuccess:function(z,h){var K=z.data;if(K.length){var B=K.map(function(F){return!(d!=null&&d(F))&&C?F[C]:void 0}).filter(function(F){return F&&!W.includes(F)});if(B.length){var j=[].concat(ie()(W),ie()(B));J(j),v==="all"&&O(j.filter(function(F){return!$.includes(F)}))}}}}),ue=ce.run,fe=ce.data,re=fe===void 0?{}:fe,ve=re.selectableTotal,b=ve===void 0?0:ve,U=re.total,L=U===void 0?0:U,o=(0,u.useMemo)(function(){return{type:v,selectableTotal:b,selectedRowKeys:E,selected:!!(v==="all"&&b||E!=null&&E.length),selectedTotal:v==="all"?(b!=null?b:L)-(($==null?void 0:$.length)||0):(E==null?void 0:E.length)||0}},[v,b,E,L,$]),q=function(z){O(z),v==="all"?G(W.filter(function(h){return!z.includes(h)})):$.length&&G([])},Q=function(){x(void 0),G([]),O([])},Y=(0,u.useCallback)(function(){var g=v==="all",z=Z||{},h=z.currentPage,K=z.pageSize,B=ne()(z,Ke),j=l()(l()({selectedTotal:o.selectedTotal,type:g?"1":"0"},g?ae()({},a,$):ae()({},s,E)),{},{condition:B});return j},[v,a,s,$,E,Z]);return{selectedInfo:o,resetSelection:Q,takeQueryParams:Y,options:l()({rowKey:C,request:function(){var g=he()(te()().mark(function h(K,B){var j;return te()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return j=(n==null?void 0:n(K,B))||K,Se(j),X.next=4,ue(j);case 4:return X.abrupt("return",X.sent);case 5:case"end":return X.stop()}},h)}));function z(h,K){return g.apply(this,arguments)}return z}(),search:{labelWidth:70},onSubmit:Q,pagination:c?l()({pageSizeOptions:[10,20,30,50],defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,size:"default",showTotal:function(z){return"\u5171\u6709 ".concat(z," \u6761")}},c):!1,rowSelection:{columnWidth:48,selectedRowKeys:E,onChange:q,preserveSelectedRowKeys:!0,selections:[{key:"all",text:"\u5168\u90E8",onSelect:function(){x("all"),G([]),O(W)}},{key:"current",text:"\u5F53\u524D\u9875",onSelect:function(z){x("current"),G([]),O(z)}}],getCheckboxProps:function(z){return{disabled:!!(d!=null&&d(z))}},alwaysShowAlert:v==="all"&&b||(E==null?void 0:E.length)},tableAlertRender:function(){return"\u5DF2\u9009\u62E9 ".concat(o.selectedTotal," \u9879")},tableAlertOptionRender:function(){return(0,A.jsx)("a",{onClick:Q,children:"\u53D6\u6D88\u9009\u62E9"})},scroll:{x:1200}},f)}}var H="dataIndex",Oe="resizable-table-id";function Ue(e){return"".concat(Oe,"-").concat(e)}function we(e){var t=e,n=t==null?void 0:t.map(function(r,i){var a;return l()(l()({},r),{},ae()({children:r!=null&&(a=r.children)!==null&&a!==void 0&&a.length?we(r.children):void 0},H,r[H]||r.key||Ue("".concat(r.title,"-").concat(i))))});return n}function Be(e){var t=(0,u.useMemo)(function(){return we(e)},[e]);return t||e}var Fe=m(65854),be=m.n(Fe),Ge=m(71402),He=function(){var t=(0,u.useRef)(!1);return(0,u.useEffect)(function(){return t.current=!1,function(){t.current=!0}},[]),t};function me(e){var t=He(),n=(0,u.useState)(e),r=I()(n,2),i=r[0],a=r[1],s=(0,u.useCallback)(function(d){t.current||a(d)},[]);return[i,s]}var Qe=m(37635),Ye=m.n(Qe);function Je(e,t,n){var r=ie()(e);return function i(a){if(a)for(var s=0;s<(a==null?void 0:a.length);s++){if(t(a[s])){a[s]=l()(l()({},a[s]),{},{width:n});return}a[s].children&&i(a[s].children)}}(r),r}function ge(e){return typeof e=="string"}function Ve(e){return Ye()(e)!=="object"||e===null?!0:!(Array.isArray(e)&&e.length||Object.keys(e).length)}var Xe=["width","minWidth","maxWidth","onResize","onResizeStart","onResizeEnd","onMount","triggerRender","className","style","onClick","children","rowSpan","colSpan","title","scope"],Ze=function(t){var n=t.width,r=t.minWidth,i=t.maxWidth,a=t.onResize,s=t.onResizeStart,d=t.onResizeEnd,y=t.onMount,P=t.triggerRender,C=t.className,R=t.style,c=t.onClick,f=t.children,p=t.rowSpan,S=t.colSpan,v=t.title,x=t.scope,N=ne()(t,Xe),D=(0,u.useRef)(null),W=me(0),J=I()(W,2),w=J[0],k=J[1];if((0,u.useEffect)(function(){n&&(k(n),y==null||y(n))},[P]),(0,u.useEffect)(function(){n&&k(n)},[k,n]),!n||Number.isNaN(Number(n)))return(0,A.jsx)("th",l()(l()({},N),{},{"data-arh-disable":"true",style:R,className:C,onClick:c,rowSpan:p,colSpan:S,children:(0,A.jsx)("span",{title:v,children:f})}));var $=function(T){document.body.style.userSelect=T?"none":"",document.body.style.pointerEvents=T?"none":"",document.documentElement.style.cursor=T?"col-resize":""},G=function(T,M){be()(T),k(M.size.width),$(!0),s==null||s(M.size.width)},ee=function(T,M){be()(T),k(M.size.width)},V=function(){w<=0||(a(w),$(!1),d==null||d(w))},E=function(){if(Array.isArray(f)){var T=f[f.length-1];if(T){var M,Z;return ge(T)||((M=T.props)===null||M===void 0?void 0:M.ellipsis)||ge((Z=T.props)===null||Z===void 0?void 0:Z.label)}}return!1};return(0,A.jsxs)("th",{scope:x,className:"resizable-container ".concat(C),style:l()(l()({},R),{},{overflow:"unset"}),"data-arh-enable":"true",ref:D,onClick:c,rowSpan:p,colSpan:S,children:[(0,A.jsx)(Ge.Resizable,{className:"resizable-box",width:w,minConstraints:[r,0],maxConstraints:[i,0],height:0,handle:(0,A.jsx)("div",{className:"resizable-handler",onClick:function(T){T.stopPropagation()},children:(0,A.jsx)("div",{className:"resizable-line"})}),draggableOpts:{enableUserSelectHack:!1},onResizeStart:G,onResize:ee,onResizeStop:V,children:(0,A.jsx)("div",{style:{width:w,height:"100%"}})}),(0,A.jsx)("div",l()(l()({},N),{},{className:"resizable-title ".concat(E()?"ellipsis":""),children:(0,A.jsx)("span",{title:v,children:f})}))]})},qe=(0,u.memo)(Ze),_e=m(66292),et=m.n(_e);function Re(e,t){var n=(0,u.useRef)({deps:t,obj:void 0,initialized:!1}),r=n.current;return(r.initialized===!1||!tt(r.deps,t))&&(r.deps=t,r.obj=e(),r.initialized=!0),r.obj}function tt(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function nt(e,t){var n,r=(0,u.useRef)(e);r.current=e;var i=(n=t==null?void 0:t.wait)!==null&&n!==void 0?n:1e3,a=Re(function(){return et()(function(){return r.current.apply(r,arguments)},i,t)},[]);return(0,u.useEffect)(function(){a.cancel()},[]),{run:a,cancel:a.cancel,flush:a.flush}}function se(e){var t=(0,u.useRef)(e);t.current=(0,u.useMemo)(function(){return e},[e]);var n=(0,u.useRef)();return n.current||(n.current=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.current.apply(this,i)}),n.current}function pe(e,t,n){var r=e;return Array.isArray(r)&&Array.isArray(t)&&r.forEach(function(i,a){if(i!=null&&i.children){var s;pe(i.children,(s=t[a])===null||s===void 0?void 0:s.children,n)}else{var d;r[a][n]=((d=t.find(function(y){return y.dataIndex===r[a].dataIndex}))===null||d===void 0?void 0:d[n])||r[a][n]}}),r}function rt(e){var t=e.columnsState,n=e.resizableColumns,r=e.columns,i=Be(r),a=se(function(){var R=t||{},c=R.persistenceType,f=R.persistenceKey;if(!f||!c||typeof window=="undefined")return i;var p=window[c];try{var S,v=(S=JSON.parse((p==null?void 0:p.getItem(f))||"{}"))===null||S===void 0?void 0:S.resizableColumns;return pe(i||[],v,"width")}catch(x){console.error(x)}}),s=(0,u.useState)(a),d=I()(s,2),y=d[0],P=d[1];(0,u.useEffect)(function(){P(a())},[i]),(0,u.useEffect)(function(){var R=t||{},c=R.persistenceType,f=R.persistenceKey;if(!(!f||!c||!(n!=null&&n.length))&&typeof window!="undefined"){var p=window[c];try{p.setItem(f,JSON.stringify(l()(l()({},JSON.parse((p==null?void 0:p.getItem(f))||"{}")),{},{resizableColumns:n.map(function(S){var v={dataIndex:S.dataIndex,key:S.key,width:S.width,children:S.children};return ge(S.title)&&(v.title=S.title),v})})))}catch(S){console.error(S)}}},[n]);var C=se(function(){P(ie()(i||[]))});return{localColumns:(0,u.useMemo)(function(){return y},[y]),resetLocalColumns:C}}function at(e){var t=(0,u.useRef)(e);return t.current=e,t}var Ce=function(t){return function(n,r){var i=(0,u.useRef)(!1);t(function(){return function(){i.current=!1}},[]),t(function(){if(!i.current)i.current=!0;else return n()},r)}},it=m(38209),ut=m.n(it);function st(e,t){var n,r=(0,u.useRef)(e);r.current=e;var i=(n=t==null?void 0:t.wait)!==null&&n!==void 0?n:1e3,a=Re(function(){return ut()(function(){return r.current.apply(r,arguments)},i,t)},[]);return(0,u.useEffect)(function(){a.cancel()},[]),{run:a,cancel:a.cancel,flush:a.flush}}var lt=Ce(u.useEffect);function ot(e,t,n){var r=(0,u.useState)({}),i=I()(r,2),a=i[0],s=i[1],d=st(function(){s({})},n),y=d.run,P=d.cancel;(0,u.useEffect)(function(){return y()},t),(0,u.useEffect)(P,[]),lt(e,[a])}var dt=Ce(ot),ct=!!(typeof window!="undefined"&&window.document&&window.document.createElement),ze=ct?u.useLayoutEffect:u.useEffect,xe=120;function ft(e){var t=e.columns,n=e.defaultWidth,r=n===void 0?xe:n,i=e.minConstraints,a=i===void 0?xe/2:i,s=e.maxConstraints,d=s===void 0?1/0:s,y=e.cache,P=y===void 0?!0:y,C=e.columnsState,R=e.onResizeStart,c=e.onResizeEnd,f=(0,u.useRef)(new Map),p=me(t||[]),S=I()(p,2),v=S[0],x=S[1],N=at(v),D=rt({columnsState:C,columns:t,resizableColumns:v}),W=D.localColumns,J=D.resetLocalColumns,w=me(),k=I()(w,2),$=k[0],G=k[1],ee=(0,u.useReducer)(function(b){return b+1},0),V=I()(ee,2),E=V[0],O=V[1],T=se(function(){f.current=new Map,J()}),M=(0,u.useCallback)(function(b){return function(U){U&&x(function(L){var o=Je(L,function(Y){return Y[H]===b&&!!Y.width},U),q=new Map;function Q(Y){Y.forEach(function(g,z){var h=g[H];q.set(h!=null?h:"",{width:g==null?void 0:g.width,index:z}),g!=null&&g.children&&Q(g.children)})}return Q(o),f.current=q,o})}},[]),Z=(0,u.useMemo)(function(){return M},[M]),Se=function(U){return function(L){R==null||R(l()(l()({},U),{},{width:L,resizableColumns:N.current}))}},ce=function(U){return function(L){c==null||c(l()(l()({},U),{},{width:L,resizableColumns:N.current}))}},ue=se(function(b){var U=b==null?void 0:b.filter(function(o){return!Ve(o)}),L=U.map(function(o){var q,Q,Y,g;return l()(l()({},o),{},ae()({children:o!=null&&(q=o.children)!==null&&q!==void 0&&q.length?ue(o.children):void 0,onHeaderCell:function(h){var K,B,j;return{title:typeof(o==null?void 0:o.title)=="string"?o==null?void 0:o.title:"",width:P&&((K=f.current)===null||K===void 0||(B=K.get((j=h[H])!==null&&j!==void 0?j:""))===null||B===void 0?void 0:B.width)||(h==null?void 0:h.width),resizable:h.resizable,onMount:M(h==null?void 0:h[H]),onResize:Z(h==null?void 0:h[H]),onResizeStart:Se(h),onResizeEnd:ce(h),minWidth:a,maxWidth:d,triggerRender:E}},width:P&&((Q=f.current)===null||Q===void 0||(Y=Q.get((g=o[H])!==null&&g!==void 0?g:""))===null||Y===void 0?void 0:Y.width)||(o==null?void 0:o.width),ellipsis:typeof o.ellipsis!="undefined"?o.ellipsis:!0},H,o[H]||o.key))});return L});ze(function(){if(W){var b=ue(W);x(b)}},[W]),dt(function(){var b=ue(v);x(b)},[E],{wait:500}),ze(function(){var b=0;(function U(L){for(var o=0;o<L.length;o++)L[o].children?U(L[o].children):L[o].hideInTable||(b+=Number(L[o].width)||r)})(v),G(b)},[r,v]);var fe=nt(O),re=fe.run;(0,u.useEffect)(function(){return window.addEventListener("resize",re),function(){window.removeEventListener("resize",re)}},[re]);var ve=(0,u.useMemo)(function(){return{header:{cell:qe}}},[]);return{resizableColumns:v,components:ve,tableWidth:$,resetColumns:T}}var vt=ft,Ee=m(46370),ht=m(20643);function mt(e){return(0,A.jsx)(Ee.LB,{modifiers:[ht.K7],children:(0,A.jsx)("table",l()({},e))})}var gt=["children"];function St(e){var t=e.children,n=ne()(e,gt);return(0,A.jsx)("tr",l()(l()({},n),{},{children:u.Children.map(t,function(r,i){var a=r.props.column,s=a.dataIndex,d=a.key,y=a.draggable;return u.cloneElement(r,{additionalProps:{index:i,id:s||d,draggable:y}})})}))}function yt(e,t){for(var n=[];(e=(r=e)===null||r===void 0?void 0:r.parentNode)&&e!==document;){var r,i;(!t||(i=e)!==null&&i!==void 0&&i.matches(t))&&n.push(e)}return n}function le(e){return e.split(";").reduce(function(t,n){if(n){var r=n==null?void 0:n.split(":"),i=I()(r,2),a=i[0],s=i[1];t[a.trim()]=s.trim()}return t},{})}function oe(e){return Object.entries(e).map(function(t){return t.join(":")}).join(";")}function wt(e,t){var n=t.min,r=t.max,i=t.offset,a=e+i;return a<n?{width:n,offset:n-e}:a>r?{width:r,offset:r-e}:{width:a,offset:i}}var de="cursor";function bt(e){var t=e.isDragging,n=e.offset,r=e.targetElem,i=e.minLimit,a=i===void 0?80:i,s=e.maxLimit,d=s===void 0?1/0:s,y=e.cache,P=y===void 0?!1:y,C=(0,u.useRef)(0);(0,u.useLayoutEffect)(function(){if(r){var R=r.querySelector(':scope i[data-cypress="draggable-handle"]');if(R){var c=yt(r,"table")[0],f=c.classList;if(t?f.contains(de)||f.add(de):f.contains(de)&&f.remove(de),t){var p=R.getBoundingClientRect(),S=c.getBoundingClientRect(),v=Math.round(p.x-S.x+n-2);c.style.cssText=oe(l()(l()({},le(c.style.cssText)),{},{"--dnd-translate-x":"".concat(v,"px")})),C.current=n}else{var x=le(c.style.cssText);if(delete x["--dnd-translate-x"],c.style.cssText=oe(x),C.current!==0){var N=c.querySelector(":scope colgroup"),D=r.getBoundingClientRect(),W=c.getBoundingClientRect(),J="--dnd-col-".concat(r.getAttribute("id")),w=le(N.style.cssText),k=le(c.style.cssText),$=wt(D.width,{min:a,max:d,offset:C.current}),G=$.width,ee=$.offset,V=W.width+ee;N.style.cssText=oe(l()(l()({},w),{},ae()({},J,"".concat(G,"px")))),c.style.cssText=oe(l()(l()({},k),{},{width:"".concat(V,"px")}))}}}}},[t,n,r])}var Rt=["children","className"];function pt(e){var t=(0,u.useRef)(),n=e.id,r=e.index,i=e.draggable,a=i===void 0?!0:i,s=(0,Ee.O1)({id:n}),d=s.attributes,y=s.listeners,P=s.setNodeRef,C=s.transform,R=s.isDragging,c=e.children,f=e.className,p=ne()(e,Rt),S=Math.round((C==null?void 0:C.x)||0);return bt(l()({isDragging:R,offset:S,targetElem:t.current},p)),(0,A.jsxs)("th",l()(l()({},p),{},{className:f,ref:t,children:[c,n&&a?(0,A.jsx)("i",l()(l()(l()({ref:P},d),y),{},{style:{display:"block",position:"absolute",top:"0",right:"0",height:"100%",width:1,backgroundColor:"rgba(255, 0, 0, .35)",cursor:"col-resize",zIndex:3},"data-cypress":"draggable-handle"})):null]}))}var Ct=["columns"];function zt(e){var t=e.columns,n=ne()(e,Ct),r=(0,u.useMemo)(function(){return t.map(function(i){var a="--dnd-col-".concat(i.dataIndex||i.key);return Object.assign(i,{width:i.width?"var(".concat(a,", ").concat(i.width,"px)"):"var(".concat(a,")")})})},[t]);return{components:{table:mt,header:{row:St,cell:function(a){return(0,A.jsx)(pt,l()(l()({},a),n))}}},columns:r,tableWidth:"100%",reset:function(){}}}}}]);
