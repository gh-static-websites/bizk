"use strict";(self.webpackChunkbizk=self.webpackChunkbizk||[]).push([[640],{52363:function(Ee,G,e){e.r(G),e.d(G,{default:function(){return be}});var se=e(25359),P=e.n(se),oe=e(49811),B=e.n(oe),ie=e(57213),N=e.n(ie),ce=e(54306),A=e.n(ce),de=e(85219),ve=e(52510),U=e.n(ve),fe=e(93525),L=e.n(fe),he=e(12342),H=e.n(he),s=e(50959);function Se(u,S){var b=(0,s.useState)(!1),j=A()(b,2),k=j[0],o=j[1],z=(0,s.useState)(),i=A()(z,2),F=i[0],O=i[1],m=(0,s.useMemo)(function(){return S||{manual:!1}},[S]),T=m.manual,D=m.onError,c=m.onSuccess,Q=(0,s.useCallback)(B()(P()().mark(function d(){var K,R,w,p,J=arguments;return P()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(o(!0),K=J.length,R=new Array(K),w=0;w<K;w++)R[w]=J[w];return a.prev=2,a.next=5,u(R);case 5:return p=a.sent,O(p),c==null||c(p,R),o(!1),a.abrupt("return",p);case 12:throw a.prev=12,a.t0=a.catch(2),D==null||D(a.t0,R),o(!1),a.t0;case 17:case"end":return a.stop()}},d,null,[[2,12]])})),[u,S]);return(0,s.useEffect)(function(){T||Q.apply(void 0,L()([]))},[T]),{loading:k,data:F,run:Q}}var g=e(11527),me=["request","adapterParams","batchParams","disabledRow","authKey","rowKey","pagination"],ye=["currentPage","pageSize"],ge={excludes:"excludes",includes:"includes"};function pe(u){var S=u.request,b=u.adapterParams,j=u.batchParams,k=j===void 0?ge:j,o=k.excludes,z=k.includes,i=u.disabledRow,F=u.authKey,O=F===void 0?"":F,m=u.rowKey,T=u.pagination,D=H()(u,me),c=(0,s.useState)(),Q=A()(c,2),d=Q[0],K=Q[1],R=(0,s.useState)([]),w=A()(R,2),p=w[0],J=w[1],X=(0,s.useState)([]),a=A()(X,2),C=a[0],I=a[1],Te=(0,s.useState)([]),Y=A()(Te,2),l=Y[0],x=Y[1],we=(0,s.useState)(),q=A()(we,2),_=q[0],Ce=q[1],ee=Se(function(){var r=B()(P()().mark(function t(v){var y,f,n,h,le,Z;return P()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,S(v,O);case 2:if(y=$.sent,f=y.success,n=y.data,h=n.wholeOperationNum,le=n.items,Z=n.totalNum,!f){$.next=10;break}return $.abrupt("return",{selectableTotal:h!=null?h:Z,total:Z,data:le,success:!0});case 10:return $.abrupt("return",{selectableTotal:0,total:0,data:[],success:!1});case 11:case"end":return $.stop()}},t)}));return function(t){return r.apply(this,arguments)}}(),{manual:!0,onSuccess:function(t){var v=t.data;if(v.length){var y=v.map(function(n){return!(i!=null&&i(n))&&m?n[m]:void 0}).filter(function(n){return n&&!p.includes(n)});if(y.length){var f=[].concat(L()(p),L()(y));J(f),d==="all"&&x(f.filter(function(n){return!C.includes(n)}))}}}}),$e=ee.run,te=ee.data,ae=te===void 0?{}:te,re=ae.selectableTotal,E=re===void 0?0:re,ne=ae.total,ue=ne===void 0?0:ne,W=(0,s.useMemo)(function(){return{type:d,selectableTotal:E,selectedRowKeys:l,selected:d==="all"&&E||(l==null?void 0:l.length),selectedTotal:d==="all"?(E!=null?E:ue)-((C==null?void 0:C.length)||0):(l==null?void 0:l.length)||0}},[d,E,l,ue,C]),je=function(t){x(t),d==="all"?I(p.filter(function(v){return!t.includes(v)})):C.length&&I([])},M=function(){K(void 0),I([]),x([])},Ke=(0,s.useCallback)(function(){var r=d==="all",t=_||{},v=t.currentPage,y=t.pageSize,f=H()(t,ye),n=N()(N()({selectedTotal:W.selectedTotal,type:r?"1":"0"},r?U()({},o,C):U()({},z,l)),{},{condition:f});return n},[d,o,z,C,l,_]),Re=function(){var r=B()(P()().mark(function t(v,y){var f;return P()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return f=(b==null?void 0:b(v,y))||v,Ce(f),h.next=4,$e(f);case 4:return h.abrupt("return",h.sent);case 5:case"end":return h.stop()}},t)}));return function(v,y){return r.apply(this,arguments)}}();return{selectedInfo:W,resetSelection:M,takeQueryParams:Ke,options:N()({rowKey:m,request:Re,search:{labelWidth:70,defaultCollapsed:!0},onSubmit:M,pagination:T?N()({pageSizeOptions:[10,20,30,50],defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,size:"default",showTotal:function(t){return"\u5171\u6709 ".concat(t," \u6761")}},T):!1,rowSelection:{columnWidth:48,selectedRowKeys:l,onChange:je,preserveSelectedRowKeys:!0,selections:[{key:"all",text:"\u5168\u90E8",onSelect:function(){K("all"),I([]),x(p)}},{key:"current",text:"\u5F53\u524D\u9875",onSelect:function(t){K("current"),I([]),x(t)}}],getCheckboxProps:function(t){return{disabled:!!(i!=null&&i(t))}},alwaysShowAlert:d==="all"&&E||(l==null?void 0:l.length)},tableAlertRender:function(){return"\u5DF2\u9009\u62E9 ".concat(W.selectedTotal," \u9879")},tableAlertOptionRender:function(){return(0,g.jsx)("a",{onClick:M,children:"\u53D6\u6D88\u9009\u62E9"})},scroll:{x:1200}},D)}}var V=e(33190),Pe=[{id:1,name:"Andy",age:18},{id:2,name:"Amy",age:45},{id:3,name:"Tom",age:32},{id:4,name:"Anna",age:30},{id:5,name:"Jue",age:25}],Ae=function(){return new Promise(function(S,b){setTimeout(function(){S({success:!0,data:{wholeOperationNum:100,items:Pe,totalNum:5}})},2e3)})},be=function(){var u=(0,s.useState)(),S=A()(u,2),b=S[0],j=S[1],k=[{title:"order",dataIndex:"id"},{title:"name",dataIndex:"name"},{title:"age",dataIndex:"age"}],o=pe({request:Ae,rowKey:"id"}),z=o.selectedInfo,i=o.resetSelection,F=o.takeQueryParams,O=o.options;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(de.Z,N()({columns:k},O)),(0,g.jsx)(V.ZP,{onClick:B()(P()().mark(function m(){var T;return P()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,F();case 2:T=c.sent,j(T);case 4:case"end":return c.stop()}},m)})),children:"\u83B7\u53D6\u67E5\u8BE2\u53C2\u6570"}),(0,g.jsx)(V.ZP,{onClick:function(){return i()},children:"\u91CD\u7F6E\u5168\u9009"}),(0,g.jsxs)("div",{children:["\u9009\u4E2D\u6570\u636E\u4FE1\u606F\uFF1A",JSON.stringify(z)]}),(0,g.jsx)("div",{children:(0,g.jsxs)("div",{children:["\u67E5\u8BE2\u53C2\u6570\uFF1A",JSON.stringify(b)||"-"]})})]})}}}]);
