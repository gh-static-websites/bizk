"use strict";(self.webpackChunkbizk=self.webpackChunkbizk||[]).push([[640],{52363:function(Re,G,e){e.r(G),e.d(G,{default:function(){return Te}});var le=e(25359),P=e.n(le),ie=e(49811),B=e.n(ie),oe=e(57213),N=e.n(oe),ce=e(54306),A=e.n(ce),de=e(85219),fe=e(52510),U=e.n(fe),ve=e(93525),L=e.n(ve),he=e(12342),H=e.n(he),l=e(50959);function Se(u,S){var T=(0,l.useState)(!1),j=A()(T,2),k=j[0],i=j[1],z=(0,l.useState)(),o=A()(z,2),F=o[0],O=o[1],m=(0,l.useMemo)(function(){return S||{manual:!1}},[S]),w=m.manual,D=m.onError,c=m.onSuccess,Q=(0,l.useCallback)(B()(P()().mark(function d(){var E,K,C,p,J=arguments;return P()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(i(!0),E=J.length,K=new Array(E),C=0;C<E;C++)K[C]=J[C];return a.prev=2,a.next=5,u(K);case 5:return p=a.sent,O(p),c==null||c(p,K),i(!1),a.abrupt("return",p);case 12:throw a.prev=12,a.t0=a.catch(2),D==null||D(a.t0,K),i(!1),a.t0;case 17:case"end":return a.stop()}},d,null,[[2,12]])})),[u,S]);return(0,l.useEffect)(function(){w||Q.apply(void 0,L()([]))},[w]),{loading:k,data:F,run:Q}}var g=e(11527),me=["request","adapterParams","batchParams","disabledRow","authKey","rowKey","pagination"],ye=["currentPage","pageSize"],ge={excludes:"excludes",includes:"includes"};function pe(u){var S=u.request,T=u.adapterParams,j=u.batchParams,k=j===void 0?ge:j,i=k.excludes,z=k.includes,o=u.disabledRow,F=u.authKey,O=F===void 0?"":F,m=u.rowKey,w=u.pagination,D=H()(u,me),c=(0,l.useState)(),Q=A()(c,2),d=Q[0],E=Q[1],K=(0,l.useState)([]),C=A()(K,2),p=C[0],J=C[1],X=(0,l.useState)([]),a=A()(X,2),b=a[0],I=a[1],we=(0,l.useState)([]),Y=A()(we,2),s=Y[0],x=Y[1],Ce=(0,l.useState)(),q=A()(Ce,2),_=q[0],be=q[1],ee=Se(function(){var n=B()(P()().mark(function t(f){var y,v,r,h,se,Z;return P()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,S(f,O);case 2:if(y=$.sent,v=y.success,r=y.data,h=r.wholeOperationNum,se=r.items,Z=r.totalNum,!v){$.next=10;break}return $.abrupt("return",{finishedTotal:h!=null?h:Z,total:Z,data:se,success:!0});case 10:return $.abrupt("return",{finishedTotal:0,total:0,data:[],success:!1});case 11:case"end":return $.stop()}},t)}));return function(t){return n.apply(this,arguments)}}(),{manual:!0,onSuccess:function(t){var f=t.data;if(f.length){var y=f.map(function(r){return!(o!=null&&o(r))&&m?r[m]:void 0}).filter(function(r){return r&&!p.includes(r)});if(y.length){var v=[].concat(L()(p),L()(y));J(v),d==="all"&&x(v.filter(function(r){return!b.includes(r)}))}}}}),$e=ee.run,te=ee.data,ae=te===void 0?{}:te,ne=ae.finishedTotal,R=ne===void 0?0:ne,re=ae.total,ue=re===void 0?0:re,W=(0,l.useMemo)(function(){return{type:d,finishedTotal:R,selectedRowKeys:s,selected:d==="all"&&R||(s==null?void 0:s.length),selectedTotal:d==="all"?(R!=null?R:ue)-((b==null?void 0:b.length)||0):(s==null?void 0:s.length)||0}},[d,R,s,ue,b]),je=function(t){x(t),d==="all"?I(p.filter(function(f){return!t.includes(f)})):b.length&&I([])},M=function(){E(void 0),I([]),x([])},Ee=(0,l.useCallback)(function(){var n=d==="all",t=_||{},f=t.currentPage,y=t.pageSize,v=H()(t,ye),r=N()(N()({selectedTotal:W.selectedTotal,type:n?"1":"0"},n?U()({},i,b):U()({},z,s)),{},{condition:v});return r},[d,i,z,b,s,_]),Ke=function(){var n=B()(P()().mark(function t(f,y){var v;return P()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return v=(T==null?void 0:T(f,y))||f,be(v),h.next=4,$e(v);case 4:return h.abrupt("return",h.sent);case 5:case"end":return h.stop()}},t)}));return function(f,y){return n.apply(this,arguments)}}();return{selectedInfo:W,resetSelection:M,takeQueryParams:Ee,options:N()({rowKey:m,request:Ke,search:{labelWidth:70,defaultCollapsed:!0},onSubmit:M,pagination:w?N()({pageSizeOptions:[10,20,30,50],defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,size:"default",showTotal:function(t){return"\u5171\u6709 ".concat(t," \u6761")}},w):!1,rowSelection:{columnWidth:48,selectedRowKeys:s,onChange:je,preserveSelectedRowKeys:!0,selections:[{key:"all",text:"\u5168\u90E8",onSelect:function(){E("all"),I([]),x(p)}},{key:"current",text:"\u5F53\u524D\u9875",onSelect:function(t){E("current"),I([]),x(t)}}],getCheckboxProps:function(t){return{disabled:!!(o!=null&&o(t))}},alwaysShowAlert:d==="all"&&R||(s==null?void 0:s.length)},tableAlertRender:function(){return"\u5DF2\u9009\u62E9 ".concat(W.selectedTotal," \u9879")},tableAlertOptionRender:function(){return(0,g.jsx)("a",{onClick:M,children:"\u53D6\u6D88\u9009\u62E9"})},scroll:{x:1200}},D)}}var V=e(33190),Pe=[{id:1,name:"Andy",age:18},{id:2,name:"Amy",age:45},{id:3,name:"Tom",age:32},{id:4,name:"Anna",age:30},{id:5,name:"Jue",age:25}],Ae=function(){return new Promise(function(S,T){setTimeout(function(){S({success:!0,data:{wholeOperationNum:100,items:Pe,totalNum:5}})},2e3)})},Te=function(){var u=(0,l.useState)(),S=A()(u,2),T=S[0],j=S[1],k=[{title:"order",dataIndex:"id"},{title:"name",dataIndex:"name"},{title:"age",dataIndex:"age"}],i=pe({request:Ae,rowKey:"id"}),z=i.selectedInfo,o=i.resetSelection,F=i.takeQueryParams,O=i.options;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(de.Z,N()({columns:k},O)),(0,g.jsx)(V.ZP,{onClick:B()(P()().mark(function m(){var w;return P()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,F();case 2:w=c.sent,j(w);case 4:case"end":return c.stop()}},m)})),children:"\u83B7\u53D6\u67E5\u8BE2\u53C2\u6570"}),(0,g.jsx)(V.ZP,{onClick:function(){return o()},children:"\u91CD\u7F6E\u5168\u9009"}),(0,g.jsxs)("div",{children:["\u9009\u4E2D\u6570\u636E\u4FE1\u606F\uFF1A",JSON.stringify(z)]}),(0,g.jsx)("div",{children:(0,g.jsxs)("div",{children:["\u67E5\u8BE2\u53C2\u6570\uFF1A",JSON.stringify(T)||"-"]})})]})}}}]);
